<?xml version="1.0" encoding="UTF-8"?>
<infinispan xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="urn:infinispan:config:9.0 http://www.infinispan.org/schemas/infinispan-config-9.0.xsd"
            xmlns="urn:infinispan:config:9.0">

  <jgroups>
    <!-- This will be tcp for local mode and kubernetes for cloud mode -->
    <stack-file name="external-file" path="default-configs/${jgroups.stack.file}"/>
  </jgroups>

  <cache-container name="default" default-cache="popular-movies-cache" statistics="true">
    <transport stack="external-file" cluster="PopularMovieStore"/>
    <!-- The cache that manages HTTP session-->
    <replicated-cache name="moviestore-sessions-cache" mode="SYNC" start="EAGER" statistics="true">
    </replicated-cache>
    <!-- Cache that will hold the movie details fetched via moviedb api -->
    <replicated-cache name="popular-movies-cache" mode="SYNC" start="EAGER" statistics="true">
      <expiration lifespan="86400000"/>
    </replicated-cache>
  </cache-container>

</infinispan>
